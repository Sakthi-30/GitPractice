CREATE TABLE TBLEMPLOYEEDATAILE
(
	FLDEMPLOYEEDATAILESID		UNIQUEIDENTIFIER
	,FLDEMPLOYEENAME			VARCHAR(30)				NOT NULL
	,FLDEMPLOYEEAGE				INT						NOT NULL
	,FLDEMPLOYEEDOB				DATE					NOT NULL
	,FLDEMPLOYEEMOBILE			BIGINT					NOT NULL
	,FLDEMPLOYEELOCATION		VARCHAR(30)				NOT NULL
	,FLDCREATEDDATE				DATETIME				NOT NULL
	,FLDCREATEDBY				INT						NOT NULL
	,FLDMODIFIEDDATE			DATETIME				NOT NULL
	,FLDMODIFIEDBY				INT						NOT NULL
	,FLDDTKEY					UNIQUEIDENTIFIER		CONSTRAINT DF_TBLEMPLOYEEDATAILE_FLDDTKEY DEFAULT(NEWSEQUENTIALID())
)




CREATE TABLE TBLAUDITEMPLOYEEDATAILE
(
	 FLDAUDITTYPE				TINYINT					NULL
	,FLDAUDITUSERCODE			INT						NULL
	,FLDAUDITDATETIME			DATETIME				NULL
	,FLDAUDITPROCEDURE			VARCHAR (128)			NULL
	,FLDAUDITTRANSFERDATE		DATETIME				NULL
	,FLDEMPLOYEEDATAILESID		UNIQUEIDENTIFIER
	,FLDEMPLOYEENAME			VARCHAR(30)				NOT NULL
	,FLDEMPLOYEEAGE				INT						NOT NULL
	,FLDEMPLOYEEDOB				DATE					NOT NULL
	,FLDEMPLOYEEMOBILE			BIGINT					NOT NULL
	,FLDEMPLOYEELOCATION		VARCHAR(30)				NOT NULL
	,FLDCREATEDDATE				DATETIME				NOT NULL
	,FLDCREATEDBY				INT						NOT NULL
	,FLDMODIFIEDDATE			DATETIME				NOT NULL
	,FLDMODIFIEDBY				INT						NOT NULL
	,FLDDTKEY					UNIQUEIDENTIFIER		NOT NULL
)
SELECT * TBLAUDITEMPLOYEEDATAILE

SELECT * FROM TBLAUDITEMPLOYEEDATAILE

DROP TABLE TBLAUDITEMPLOYEEDATAILE






CREATE PROCEDURE PREMPLOYEEDATAILEINSERT
(
	@ROWUSERCODE			INT						
	,@EMPLOYEENAME			VARCHAR(30)	 NOT NULL
	,@EMPLOYEEAGE			INT			 NOT NULL
	,@EMPLOYEEDOB			DATE		 NOT NULL
	,@EMPLOYEEMOBILE		BIGINT		 NOT NULL
	,@EMPLOYEELOCATION		VARCHAR(30)	 NOT NULL
)
AS
BEGIN

	SET NOCOUNT ON
 
	DECLARE @EMPLOYEEDATAILESID	UNIQUEIDENTIFIER
	SELECT @EMPLOYEEDATAILESID = NEWID()

	INSERT INTO TBLEMPLOYEEDATAILE
	(
		FLDEMPLOYEEDATAILESID
		,FLDEMPLOYEENAME	
		,FLDEMPLOYEEAGE		
		,FLDEMPLOYEEDOB		
		,FLDEMPLOYEEMOBILE	
		,FLDEMPLOYEELOCATION
		,FLDCREATEDDATE
		,FLDCREATEDBY		
		,FLDMODIFIEDDATE	
		,FLDMODIFIEDBY		
	)

	OUTPUT 0, @ROWUSERCODE, GETUTCDATE(), OBJECT_NAME(@@PROCID), NULL,INSERTED.* INTO TBLAUDITEMPLOYEEDATAILE

	VALUES
	(
		@EMPLOYEEDATAILESID		
		,@EMPLOYEENAME		
		,@EMPLOYEEAGE		
		,@EMPLOYEEDOB		
		,@EMPLOYEEMOBILE	
		,@EMPLOYEELOCATION
		,GETUTCDATE()
		,@ROWUSERCODE
		,GETUTCDATE()
		,@ROWUSERCODE
	)
END